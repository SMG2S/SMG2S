<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMG2S: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SMG2S
   </div>
   <div id="projectbrief">Sparse Matrix Generator with Given Spectrum</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md0">Overview</a><ul><li class="level2"><a href="#autotoc_md1">Update !!!</a></li>
<li class="level2"><a href="#autotoc_md3">What for ?</a></li>
<li class="level2"><a href="#autotoc_md4">Cite SMG2S</a></li>
<li class="level2"><a href="#autotoc_md5">Documentation</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md6">Installation</a><ul><li class="level2"><a href="#autotoc_md7">Binary Executable file</a></li>
<li class="level2"><a href="#autotoc_md8">Include files</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md9">Example</a><ul><li class="level2"><a href="#autotoc_md10">Creation</a><ul><li class="level3"><a href="#autotoc_md12">Given Spectra file in pseudo-Matrix Market Vector Format</a><ul><li class="level4"><a href="#autotoc_md13">Non-Hermitian case</a></li>
<li class="level4"><a href="#autotoc_md14">Non-Symmetric case</a></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md16">Interface</a><ul><li class="level3"><a href="#autotoc_md17">Interface to PETSc</a></li>
<li class="level3"><a href="#autotoc_md18">Interface to Python</a></li>
<li class="level3"><a href="#autotoc_md19">Interface to C</a></li>
<li class="level3"><a href="#autotoc_md20">Interface to Trilinos/Teptra CSR matrix</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md21">Verification</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
Overview</h1>
<p>Sparse Matrix Generator with Given Spectrum</p>
<p><a href="https://doi.org/10.5281/zenodo.2694506"><object type="image/svg+xml" data="https://zenodo.org/badge/DOI/10.5281/zenodo.2694506.svg" style="pointer-events: none;">DOI</object></a></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Update !!!</h2>
<p>In the newest version (v1.1) of SMG2S, it supports the generation of nonsymmetric matrices that all the entries of matrices are real and the eigenvalues can be both real and complex.</p>
<hr  />
<p>Author <a href="https://brunowu.github.io">Xinzhe Wu</a> @ <a href="http://www.maisondelasimulation.fr">Maison de la Simulation</a>, France.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
What for ?</h2>
<p>SMG2S is able to generate large-scale non-Hermitian (non-Symmetric) methods in parallel with the spectral distribution functions or eigenvalues given by users. SMG2S can be used to benchmark the iterative linear and eigen solvers on supercomputers using the generated very large test matrices with customized spectral properties.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Cite SMG2S</h2>
<ol type="1">
<li>Wu, Xinzhe, Serge G. Petiton, and Yutong Lu. "A Parallel Generator of Non-Hermitian Matrices computed from Given Spectra." Concurrency and Computation: Practice and Experience, 32(20), e5710, 2020. <a href="https://doi.org/10.1002/cpe.5710">(DOI)</a></li>
<li>Wu, Xinzhe. SMG2S Manual v1. 0. Maison de la Simulation, 2018. <a href="https://hal.archives-ouvertes.fr/hal-01874810/document">(PDF)</a></li>
</ol>
<p><img src="doc/figure/matgen.png" alt="Matrix Generation Pattern" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md5"></a>
Documentation</h2>
<p>Website of SMG2S is <a href="https://smg2s.github.io/">here</a>, Developing repository is on <a href="https://github.com/SMG2S">Github</a>.</p>
<p><a href="https://smg2s.github.io/files/smg2s_manual_v1_1.pdf">Documentation</a> is avaiable.</p>
<p>Python version is avaiable on <a href="https://pypi.org/project/smg2s/">Pypi</a>, which can be installed by the command:</p>
<div class="fragment"><div class="line">CC=mpicxx pip install smg2s</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
Binary Executable file</h2>
<p>In the main directory:</p>
<div class="fragment"><div class="line">cmake .  -DCMAKE_INSTALL_PREFIX=${INSTALL_DIRECTORY}</div>
</div><!-- fragment --><p>Install</p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>Execution</p>
<div class="fragment"><div class="line">mpirun -np ${PROCS} ./smg2s.exe -D ${MAT_SIZE} -L ${LOW_BANDWIDTH} -C ${CONTINUOUS_ONES} -S ${GIVEN_SPECTRUM_FILE} -M ${MATTYPE}</div>
</div><!-- fragment --><p>If ${GIVEN_SPECTRUM_FILE} is not given, SMG2S will use the internal eigenvalue generation method to generate a default spectrum.</p>
<p>If ${MATTYPE} is not given, SMG2S will generate the non-Hermitian matrices. If the users want to generate non symmetric matrices, it should be set as "non-sym".</p>
<p>Below are the complete definitions of commandline parser for it:</p>
<div class="fragment"><div class="line">usage: ./smg2s.exe [options] ...</div>
<div class="line">options:</div>
<div class="line">  -D, --dim           Dimension of matrix to be generated (int [=1000])</div>
<div class="line">  -L, --lbandwidth    low bandwidth of initial matrix (int [=5])</div>
<div class="line">  -C, --continous     Continuous length in Nilpotent matrix (int [=2])</div>
<div class="line">  -S, --spectrum      local file with given spectrum (string [= ])</div>
<div class="line">  -M, --mattype       Matrix type to be generated: non-symmetric or non-Hermitian (string [=non-herm])</div>
<div class="line">  -?, --help          print this message</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Include files</h2>
<p>Install the binary file and includes files into ${INSTALL_DIRECTORY} </p><div class="fragment"><div class="line">make install</div>
</div><!-- fragment --><p>Include the SMG2S header file </p><div class="fragment"><div class="line"><span class="comment">/*Generate Non Hermitian Matrices*/</span></div>
<div class="line"><span class="preprocessor">#include &lt;smg2s/smg2s.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*Generate Non Symmetric Matrices whose eigenvalues can be real and complex*/</span></div>
<div class="line"><span class="preprocessor">#include &lt;smg2s/smg2s_nonsymmetric.h&gt;</span></div>
</div><!-- fragment --><p>Include and Compile </p><div class="fragment"><div class="line">mpicxx example.cpp -I${INSTALL_DIRECTORY}/include</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
Example</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
Creation</h2>
<p>Include header file</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;smg2s/smg2s.h&gt;</span></div>
</div><!-- fragment --><p>Generate the <a class="el" href="class_nilpotent.html" title="A class which determines the information of a nilpotent matrix.">Nilpotent</a> Matrix for operation: </p><div class="fragment"><div class="line">Nilpotency&lt;int&gt; nilp;</div>
<div class="line">nilp.NilpType1(length,probSize);</div>
</div><!-- fragment --><p>Create the parallel Sparse Matrix Object Mt: </p><div class="fragment"><div class="line"><a class="code" href="classpar_matrix_sparse.html">parMatrixSparse&lt;std::complex&lt;float&gt;</a>,<span class="keywordtype">int</span>&gt; *Mt;</div>
<div class="line"><a class="code" href="classpar_matrix_sparse.html">parMatrixSparse&lt;std::complex&lt;float&gt;</a>,<span class="keywordtype">int</span>&gt; *Mt2;</div>
</div><!-- fragment --><p>Generate a new matrix: </p><div class="fragment"><div class="line">MPI_Comm comm; <span class="comment">//working MPI Communicator</span></div>
<div class="line"><span class="comment">/*Generate Non Hermitian Matrices*/</span></div>
<div class="line">Mt = smg2s&lt;std::complex&lt;float&gt;,<span class="keywordtype">int</span>&gt;(probSize, nilp, lbandwidth, spectrum, comm);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*Generate Non Symmetric Matrices whose eigenvalues can be real and complex*/</span></div>
<div class="line">Mt2 = smg2s_nonsymmetric&lt;float,int&gt;(probSize, nilp, lbandwidth, spectrum, comm);</div>
</div><!-- fragment --><p><a class="anchor" id="autotoc_md11"></a></p><h5>ATTENTION:</h5>
<p>For generating non symmetric matrices with complex eigenvalues, the first typename in the template of can only be <b>double</b> or <b>float</b>.</p>
<h3><a class="anchor" id="autotoc_md12"></a>
Given Spectra file in pseudo-Matrix Market Vector Format</h3>
<h4><a class="anchor" id="autotoc_md13"></a>
Non-Hermitian case</h4>
<ul>
<li>Complex values</li>
</ul>
<p>For the complex values, the given spectrum is stored in three columns, the first column is the coordinates, the second column is the real part of complex values, and the third column is the imaginary part of complex values. </p><pre class="fragment">%%MatrixMarket matrix coordinate complex general
3 3 3
1 10 6.5154
2 10.6288 3.4790
3 10.7621 5.0540
</pre><ul>
<li>Real Values</li>
</ul>
<p>For the real values, the given spectrum is stored in two columns, the first column is the coordinates, the second column is related values. </p><pre class="fragment">%%MatrixMarket matrix coordinate real general
3 3
1 10
2 10.6288    
3 10.7621
</pre><h4><a class="anchor" id="autotoc_md14"></a>
Non-Symmetric case</h4>
<p>In order to generate non-Symmetric test matrices with given complex and real eigenvalues, the give spectrum are always stored in complex form, which has three columns.</p>
<p><a class="anchor" id="autotoc_md15"></a></p><h5>Attention:</h5>
<p>For the non-Symmetric test matrices, if one eigenvalue is complex, there exits another value that they two are symmetric to the real axis in the real-imaginary plain. So when setting up the spectral file, one eigenvalue a+bi should be closely followed by another eigenvalue a-bi. For the real eigenvalues, they are stored with their imaginary part being 0. Here is an example </p><pre class="fragment">%%MatrixMarket matrix coordinate complex general
9 9 9
1 10.6288 -3.4790
2 10.6288 3.4790
3 2.332 0
4 10.7621 5.0540
5 10.7621 -5.0540
6 -2.332 0
7 -11.02 0
8 21.21 4.4
9 21.21 -4.4
</pre><h2><a class="anchor" id="autotoc_md16"></a>
Interface</h2>
<p>The cmake will check if PETSc is installed in the platfrom, if yes, header file to interface will also be copied to ${INSTALL_DIRECTORY}/include when installing SMG2S.</p>
<h3><a class="anchor" id="autotoc_md17"></a>
Interface to PETSc</h3>
<p>Include header file</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;interface/PETSc/petsc_interface.h&gt;</span></div>
</div><!-- fragment --><p>Create <a class="el" href="classpar_matrix_sparse.html" title="A class which defines a sparse matrix distributed across 1D MPI grid.">parMatrixSparse</a> type matrix</p>
<div class="fragment"><div class="line"><a class="code" href="classpar_matrix_sparse.html">parMatrixSparse&lt;std::complex&lt;double&gt;</a>,<span class="keywordtype">int</span>&gt; *Mt;</div>
</div><!-- fragment --><p>Restore this matrix into CSR format</p>
<div class="fragment"><div class="line">Mt-&gt;Loc_ConvertToCSR();</div>
</div><!-- fragment --><p>Create PETSc MAT type </p><div class="fragment"><div class="line">MatCreate(PETSC_COMM_WORLD,&amp;A);</div>
</div><!-- fragment --><p>Convert to PETSc MAT format </p><div class="fragment"><div class="line">A = ConvertToPETSCMat(Mt);</div>
</div><!-- fragment --><p>More information: <a href="https://github.com/brunowu/SMG2S/tree/master/example/gmres">PETSc GMRES example</a> and <a href="https://github.com/brunowu/SMG2S/tree/master/example/arnoldi">PETSc Arnoldi example</a></p>
<h3><a class="anchor" id="autotoc_md18"></a>
Interface to Python</h3>
<p>Generate the shared library and install the python module of smg2s </p><div class="fragment"><div class="line">#install online from pypi</div>
<div class="line">CC=mpicxx pip install smg2s</div>
<div class="line"> </div>
<div class="line">#bulid in local</div>
<div class="line">cd ./interface/Python</div>
<div class="line">CC=mpicxx python setup.py build_ext --inplace</div>
<div class="line">#or</div>
<div class="line">CC=mpicxx python setup.py build</div>
<div class="line">#or</div>
<div class="line">CC=mpicxx python setup.py install</div>
<div class="line"> </div>
<div class="line">#run</div>
<div class="line">mpirun -np 2 python generate.py</div>
</div><!-- fragment --><p>Before the utilisation, make sure that <a href="http://mpi4py.scipy.org/docs/">mpi4py</a> installed.</p>
<p>A little example of usge: </p><div class="fragment"><div class="line">from mpi4py import MPI</div>
<div class="line">import smg2s</div>
<div class="line">import sys</div>
<div class="line"> </div>
<div class="line">size = MPI.COMM_WORLD.Get_size()</div>
<div class="line">rank = MPI.COMM_WORLD.Get_rank()</div>
<div class="line">name = MPI.Get_processor_name()</div>
<div class="line"> </div>
<div class="line">sys.stdout.write(</div>
<div class="line">    &quot;Hello, World! I am process %d of %d on %s.\n&quot;</div>
<div class="line">    % (rank, size, name))</div>
<div class="line"> </div>
<div class="line">if rank == 0:</div>
<div class="line">        print (&#39;INFO ]&gt; Starting ...&#39;)</div>
<div class="line">        print(&quot;INFO ]&gt; The MPI Comm World Size is %d&quot; %size)</div>
<div class="line"> </div>
<div class="line">#bandwidth for the lower band of initial matrix</div>
<div class="line">lbandwidth = 3</div>
<div class="line"> </div>
<div class="line">#create the nilpotent matrix</div>
<div class="line">nilp = smg2s.NilpotencyInt()</div>
<div class="line"> </div>
<div class="line">#setup the nilpotent matrix: 2 = continous 1 nb, 10 = matrix size</div>
<div class="line">nilp.NilpType1(2,10)</div>
<div class="line"> </div>
<div class="line">if rank == 0:</div>
<div class="line">        print(&quot;Nilptency matrix continuous one nb = %d&quot; %nilp.nbOne)</div>
<div class="line"> </div>
<div class="line">Mt = smg2s.parMatrixSparseDoubleInt()</div>
<div class="line">Mt2 = smg2s.parMatrixSparseDoubleInt()</div>
<div class="line"> </div>
<div class="line">#Generate non-Hermitian matrix Mt by SMG2S</div>
<div class="line">#vector.txt is the file that stores the given spectral distribution in local filesystem.</div>
<div class="line">Mt=smg2s.smg2sDoubleInt(10,nilp,lbandwidth,&quot;vector.txt&quot;, MPI.COMM_WORLD)</div>
<div class="line">#Generate non-Symmetric matrix Mt by SMG2S</div>
<div class="line">Mt2=smg2s.smg2sNonSymmetricDoubleInt(10,nilp,lbandwidth,&quot; &quot;, MPI.COMM_WORLD)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md19"></a>
Interface to C</h3>
<p>The make install command will generate a shared library <code>libsmg2s2c.so</code> into <code>${INSTALL_DIRECTORY}/lib</code>. It can be used to profit the C wrapper of SMG2S.</p>
<p>The compile command:</p>
<div class="fragment"><div class="line">mpicxx -L${INSTALL_DIRECTORY}/lib -I${INSTALL_DIRECTORY}/include -Wall -o test.exe main.c -lsmg2s2c</div>
</div><!-- fragment --><p>A basic example of usge:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;interface/C/c_wrapper.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;mpi.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line"> </div>
<div class="line">    MPI_Init(&amp;argc, &amp;argv);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> size,rank;</div>
<div class="line">    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);</div>
<div class="line">    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/*create Nilpotency object*/</span></div>
<div class="line">    <span class="keyword">struct </span>NilpotencyInt *n;</div>
<div class="line">  <span class="comment">/*create Instance*/</span></div>
<div class="line">    n = newNilpotencyInt();</div>
<div class="line">  <span class="comment">/*setup Nilpotency object*/</span></div>
<div class="line">    NilpType1(n, 2, 10);</div>
<div class="line">    <span class="keywordflow">if</span>(rank == 0){</div>
<div class="line">        showNilpotencyInt(n);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/*Create parMatrixSparse Object*/</span></div>
<div class="line">    <span class="keyword">struct </span>parMatrixSparseDoubleInt *m;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">struct </span>parMatrixSparseDoubleInt *m2;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/*create Instance*/</span></div>
<div class="line">    m = newParMatrixSparseDoubleInt();</div>
<div class="line">  </div>
<div class="line">  m2 = newParMatrixSparseDoubleInt();</div>
<div class="line">  </div>
<div class="line">  <span class="comment">/*Generate non-Hermitian matrix by SMG2S*/</span></div>
<div class="line">    smg2s(m, 10, n, 3 ,<span class="stringliteral">&quot; &quot;</span>,MPI_COMM_WORLD);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">/*Generate non-Symmetric matrix by SMG2S*/</span></div>
<div class="line">  smg2s(m2, 10, n, 3 ,<span class="stringliteral">&quot; &quot;</span>,MPI_COMM_WORLD);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">/*Matrix View*/</span></div>
<div class="line">    LOC_MatView(m);</div>
<div class="line">  </div>
<div class="line">  LOC_MatView(m2);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/*Release Nilpotency Object</span></div>
<div class="line"><span class="comment">  Release parMatrixSparse Object*/</span></div>
<div class="line">    ReleaseNilpotencyInt(&amp;n);</div>
<div class="line">    ReleaseParMatrixSparseDoubleInt(&amp;m);</div>
<div class="line">  ReleaseParMatrixSparseDoubleInt(&amp;m2);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    MPI_Finalize();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md20"></a>
Interface to Trilinos/Teptra CSR matrix</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;interface/Trilinos/trilinos_interface.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;parMatrix/parMatrixSparse.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* </span></div>
<div class="line"><span class="comment">...</span></div>
<div class="line"><span class="comment">Include the headers of Trilinos/Teptra </span></div>
<div class="line"><span class="comment">...</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* </span></div>
<div class="line"><span class="comment">...</span></div>
<div class="line"><span class="comment">Generate matrix Am by SMG2S function</span></div>
<div class="line"><span class="comment">...</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Trilinos outstream */</span></div>
<div class="line">Teuchos::RCP&lt;Teuchos::FancyOStream&gt; fos = Teuchos::fancyOStream(Teuchos::rcpFromRef(out));</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Convert Am to Teptra Matrix format */</span></div>
<div class="line"> </div>
<div class="line">Teuchos::RCP&lt;Teptra::CsrMatrix&lt;Scalar Type&gt;&gt; K = ConvertToTrilinosMat(Am);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* FIX the matrix allocation status, this function should be called after all the modifcations on matrix K are DONE! */</span></div>
<div class="line">K-&gt;fillComplete (); </div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Shown the matrix K by describe function in Trilinos*/</span></div>
<div class="line">K-&gt;describe(*fos, Teuchos::VERB_EXTREME);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21"></a>
Verification</h2>
<p><img src="doc/figure/vector.png" alt="Comparison of generated spectrum with given spectrum" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aclasspar_matrix_sparse_html"><div class="ttname"><a href="classpar_matrix_sparse.html">parMatrixSparse</a></div><div class="ttdoc">A class which defines a sparse matrix distributed across 1D MPI grid.</div><div class="ttdef"><b>Definition:</b> parMatrixSparse.hpp:59</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
