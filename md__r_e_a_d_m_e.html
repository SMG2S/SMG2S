<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMG2S: Sparse Matrix Generator with Given Spectrum</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SMG2S
   </div>
   <div id="projectbrief">Sparse Matrix Generator with Given Spectrum</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Sparse Matrix Generator with Given Spectrum </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://doi.org/10.5281/zenodo.2694506"><object type="image/svg+xml" data="https://zenodo.org/badge/DOI/10.5281/zenodo.2694506.svg" style="pointer-events: none;">DOI</object></a></p>
<hr  />
<h1><a class="anchor" id="autotoc_md2"></a>
Overview</h1>
<p>Author <a href="https://brunowu.github.io">Xinzhe Wu</a> @ <a href="http://www.maisondelasimulation.fr">Maison de la Simulation</a>, France (2016-2019).</p>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;@ <a href="https://www.fz-juelich.de/en/ias/jsc/about-us/structure/simulation-and-data-labs/sdl-quantum-materials">SDL Quantum Materials</a>, Forschungszentrum Juelich GmbH, Germany (2019-present).</p>
<hr  />
<h2><a class="anchor" id="autotoc_md3"></a>
What is SMG2S?</h2>
<p><b>SMG2S</b> is able to generate large-scale non-Hermitian and non-Symmetric matrices in parallel with the spectral distribution functions or eigenvalues given by users. SMG2S can be used to benchmark the iterative solvers for both linear systems and eigenvalue problems on supercomputers using the generated very large test matrices with customized spectral properties.</p>
<p>As a matrix generator, SMG2S provides:</p>
<ul>
<li>generating of both Non-Hermitian and Non-Symmetric sparse matrix</li>
<li>generated matrices are naturally Sparse with non-trivial sparsity pattern</li>
<li>Given Spectrum: the spectrum of generated matrix is the same as the one specified by the users</li>
<li>Sparsity Patterns are diverse and controllable</li>
</ul>
<p>As a software, SMG2S provides:</p>
<ul>
<li>a collection of C++ header only files</li>
<li>C++ templated implementation for different data type</li>
<li>parallel implementation based on <a href="https://en.wikipedia.org/wiki/Message_Passing_Interface">[MPI]</a> which is able to efficiently generate very large sparse matrices in parallel on supercomputers</li>
<li>an easy-to-use C interface</li>
<li>a verification module based on Python for the sparsity pattern plotting and spectrum verification of small size of generated matrix.</li>
<li>Efficient parallel IO to store the generated matrix into <a href="https://math.nist.gov/MatrixMarket/formats.html">MatrixMarket format</a></li>
</ul>
<p><img src="https://github.com/SMG2S/SMG2S/tree/devel/docs/figure/matgen.png" alt="Matrix Generation Pattern" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md4"></a>
Cite SMG2S</h2>
<p>If you find SMG2S useful in your project, we kindly request that you cite the following paper:</p>
<p>Wu, Xinzhe, Serge G. Petiton, and Yutong Lu. "A Parallel Generator of Non-Hermitian Matrices computed from Given Spectra." Concurrency and Computation: Practice and Experience, 32(20), e5710, 2020. <a href="https://doi.org/10.1002/cpe.5710">[DOI]</a> <a href="https://onlinelibrary.wiley.com/doi/pdfdirect/10.1002/cpe.5710?casa_token=UUntHdbHvo4AAAAA:CHJa3O1_B-15_eHKY09LuWdh5TNs_trh_IXa_qDuNZLeTKcxa4CQt9WzrNsU1XSWxunknU8GeXP9Ihv9">[PDF]</a></p>
<h2><a class="anchor" id="autotoc_md5"></a>
Gallery: Sparsity Patterns</h2>
<p>Please refer to <a href="https://github.com/SMG2S/SMG2S/tree/devel/docs/gallery">docs/gallery</a> for more examples.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Contact and Contributation</h2>
<p>Feel free to contact by email address: **xin DOT wu AT fz BAR juelich DOT de***</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Documentation</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
Getting SMG2S</h2>
<p>SMG2S is able to available on the Github. The most updated version of SMG2S can be gotten either by the following <code>git</code> command:</p>
<div class="fragment"><div class="line">git clone https://github.com/SMG2S/SMG2S.git</div>
</div><!-- fragment --><p>Moreover a released version can be downloaded [here](http)</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Dependencies</h2>
<p>SMG2S is developed in C++14 and MPI, and it is compiled with CMake. So the following software and compiler should be available before the installation of SMG2S.</p>
<ol type="1">
<li>a C++ compiler with C++14 support</li>
<li>MPI: message passing interface</li>
<li>CMake: version &gt;= 3.8</li>
</ol>
<h2><a class="anchor" id="autotoc_md10"></a>
Quick start</h2>
<p>SMG2S provides an executable <code>smg2s.exe</code> that the users can compile and start to play with SMG2S without installation as follows.</p>
<div class="fragment"><div class="line">cd SMG2S</div>
<div class="line">mkdir build &amp; cd build</div>
<div class="line">cmake .. </div>
<div class="line">make -j</div>
</div><!-- fragment --><p>Then the executable <code>smg2s.exe</code>is available, and it can be run as follows:</p>
<div class="fragment"><div class="line">mpirun -np ${PROCS} ./smg2s.exe -D ${dim} -L ${diag_l} -U ${diag_u} -O ${offset} -C ${nbOne} -S ${sparsity} -M {no-herm or non-symm}</div>
</div><!-- fragment --><p>in which the command line parsers provides the customization of following parameters:</p>
<div class="fragment"><div class="line">usage: ./smg2s.exe [options] ...</div>
<div class="line">options:</div>
<div class="line">  -D, --dim           Dimension of matrix to be generated (int [=1000])</div>
<div class="line">  -L, --diagL         offset of lower diagonal of initial matrix (int [=-10])</div>
<div class="line">  -U, --diagU         offset of upper diagonal of initial matrix (int [=-5])</div>
<div class="line">  -O, --nilpOffset    offset of diagonal of a nilpotent (int [=5])</div>
<div class="line">  -C, --continous     Continuous length in Nilpotent matrix (int [=2])</div>
<div class="line">  -S, --sparsity      sparsity of initial matrix (NOT THE FINAL GENERATED ONES) (double [=0.95])</div>
<div class="line">  -M, --mattype       Matrix type to be generated: non-symmetric or non-Hermitian (string [=non-herm])</div>
<div class="line">  -?, --help          print this message</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md11"></a>
Installation</h2>
<p>SMG2S relies on CMake for compiling and installation. A CMake flag <code>CMAKE_INSTALL_PREFIX</code> should be provided for the path of installation.</p>
<div class="fragment"><div class="line">cd SMG2S</div>
<div class="line">mkdir build &amp; cd build</div>
<div class="line">cmake .. -DCMAKE_INSTALL_PREFIX=${PATH_TO_INSTALL}</div>
<div class="line">make -j install</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Use SMG2S with own project</h2>
<h3><a class="anchor" id="autotoc_md13"></a>
header-only</h3>
<p>SMG2S is a collection of C++ header files. If users want to use SMG2S with C++, they can just copy SMG2S headers into their project.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
CMake</h3>
<p>SMG2S is installed as a CMake package, and it can be detected by the classic CMake <code>find_package</code> command. If the installation path is not in the default searching path of CMake, a CMake flag <code>CMAKE_PREFIX_PATH</code> should be provided which links to the installation path of SMG2S.</p>
<p>So in your own project which want to use SMG2S:</p>
<div class="fragment"><div class="line">mkdir build &amp; cd build</div>
<div class="line">cmake .. -DCMAKE_PREFIX_PATH=${INSTALLED_PATH_OF_SMG2S}</div>
<div class="line">make -j</div>
</div><!-- fragment --><p>and in the <code>CMakeLists.txt</code> of own project, it should provide some content as follows:</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.8)</div>
<div class="line">project(YOUR-OWN-PROJECT)</div>
<div class="line">#find installation of SMG2S</div>
<div class="line">find_package( smg2s REQUIRED CONFIG)</div>
<div class="line"># for C++ code</div>
<div class="line">add_executable(smg2s-app test_parMatrix.cpp)</div>
<div class="line">target_link_libraries(smg2s-app PUBLIC SMG2S::smg2s)</div>
<div class="line"># for C-interface code</div>
<div class="line">add_executable(test_c.exe test_c.c)</div>
<div class="line">target_link_libraries(test_c.exe PRIVATE SMG2S::smg2s2c)</div>
</div><!-- fragment --><p>In case that the support of <code>C++14</code> is disabled by some <code>C++</code> compiler, please insert also the following lines into your <code>CMakeLists.txt</code> before the usage of SMG2S.</p>
<div class="fragment"><div class="line">include(CheckCXXCompilerFlag)</div>
<div class="line">CHECK_CXX_COMPILER_FLAG(&quot;-std=c++14&quot; COMPILER_SUPPORTS_CXX14)</div>
<div class="line">if(COMPILER_SUPPORTS_CXX14)</div>
<div class="line">    set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++14&quot;)</div>
<div class="line">else()</div>
<div class="line">     message([FATAL_ERROR] &quot;The compiler ${CMAKE_CXX_COMPILER} has no C++14 support. Please use a different C++ compiler.&quot;)</div>
<div class="line">endif()</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15"></a>
Usage</h2>
<h3><a class="anchor" id="autotoc_md16"></a>
Parallel vector and sparse matrix</h3>
<h3><a class="anchor" id="autotoc_md17"></a>
Building blocks SMG2S</h3>
<h4><a class="anchor" id="autotoc_md18"></a>
1. Distribution of sparse matrix and vector</h4>
<h4><a class="anchor" id="autotoc_md19"></a>
2. User-provided spectrum</h4>
<h4><a class="anchor" id="autotoc_md20"></a>
3. Nilpotent matrix</h4>
<h4><a class="anchor" id="autotoc_md21"></a>
4. Initial matrix</h4>
<p>SMG2S provides the generation of matrices in three different categories:</p>
<ol type="1">
<li>non-Hermtian matrices with complex eigenvalues</li>
<li>non-Symmetric matrices with real eigenvalues</li>
<li>non-Symmetric matrices with conjugated eigenvalues</li>
</ol>
<p>For each categories, SMG2S provides three functions which allows the users having different levels of controlling and customizing the properties of generated matrices.</p>
<ol type="1">
<li>the first level, users need to provide multiple simple parameters and a local text file containing the eigenvalues. For the format of local file, please check the next section.</li>
<li>the second level,</li>
<li>the third level</li>
</ol>
<h2><a class="anchor" id="autotoc_md22"></a>
Format of Given Spectrum Files</h2>
<p>SMG2S is able to load user-provided spectrum in parallel from local text files. However, the provided files should conform into a specific format.</p>
<ol type="1">
<li>The first line is the comment part which includes the scalar types of given spectrum. This line should be: <code>%SMG2S vector in complex scalar</code> and <code>%SMG2S vector in real scalar</code> for the eigenvalues in complex or real scalar type, explicitly. <b>Attention</b>, for this line, the key word <code>complex</code> or <code>real</code> should always be there and conform with the type of user-provided spectrum. The parallel IO of SMG2S queries at first this line to check if the provided eigenvalues are complex or real.</li>
<li>The second line indicates the number of given eigenvaues in the files. For the ones with <code>3</code> complex values, it is <code>3 3 3</code>, and for the ones with <code>3</code> real eigenvalues, it should be <code>3 3</code>.</li>
<li>Starting from the <code>3rd</code> line, it is the main content of this file. It can have either <code>2</code> or <code>3</code> columns, which depends on the scalar types of eigenvalues. For the case with complex values, the first column indicates the coordinates for each eigenvalue, the second column contains the real part of eigenvalues, and the third column is for the imaginary part of eigenvalues. For the case with real values, the two columns contain the indexing and values of eigenvalues, respectively. <b>Attention</b>, the indexing is <code>1</code>-based, rather than <code>0</code>-based. <br  />
</li>
</ol>
<h4><a class="anchor" id="autotoc_md23"></a>
Real eigenvalues for non-Symmetric matrices</h4>
<p>For the case with real eigenvalues for non-Symmetric matrices, the given spectrum file format should be as follows:</p>
<div class="fragment"><div class="line">%%SMG2S vector in real scalar</div>
<div class="line">3 3 </div>
<div class="line">1 10</div>
<div class="line">2 3.4790</div>
<div class="line">3 5.0540</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md24"></a>
Complex eigenvalues for non-Hermtian matrices</h4>
<p>For the complex values for non-Hermitian matrices which are not supposed to be conjugated, the given spectrum is stored in three columns, the first column is the coordinates, the second column is the real part of complex values, and the third column is the imaginary part of complex values. Here is an example with <code>3</code> eigenvalues: </p><pre class="fragment">%%SMG2S vector in complex scalar
3 3 3
1 10 6.5154
2 10.6288 3.4790
3 10.7621 5.0540
</pre><h4><a class="anchor" id="autotoc_md25"></a>
Conjugate eigenvalues for non-Symmetric matrices</h4>
<p>For the non-Symmetric matrices whose entries are all in real scalar, they can have conjugate eigenvalues which are in complex scalar. So in order to generate non-Symmetric test matrices with given conjugated eigenvalues, the give spectrum are always stored in complex form, with three columns.</p>
<h4><a class="anchor" id="autotoc_md26"></a>
Attention:</h4>
<p>For the non-Symmetric matrices, if one eigenvalue is complex, there is another value that they two are symmetric to the real axis in the real-imaginary plain, this is their conjugated eigenvalue. So when setting up the spectral file, one eigenvalue <code>a+bi</code> with <code>b != 0</code> should be closely followed by another eigenvalue <code>a-bi</code>. For the eigenvalues with their imaginary part to be <code>0</code>, they are stored with their imaginary part being 0. Here is an example </p><pre class="fragment">%%SMG2S vector in complex scalar
9 9 9
1 10.6288 -3.4790
2 10.6288 3.4790
3 2.332 0
4 10.7621 5.0540
5 10.7621 -5.0540
6 -2.332 0
7 -11.02 0
8 21.21 4.4
9 21.21 -4.4
</pre><h2><a class="anchor" id="autotoc_md27"></a>
Interface</h2>
<h3><a class="anchor" id="autotoc_md28"></a>
Interface to C</h3>
<p>A basic example of usge:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;interface/C/c_wrapper.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;mpi.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[]) {</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md29"></a>
autotoc_md29</h2>
<p><img src="https://github.com/SMG2S/SMG2S/tree/devel/docs/figure/verification_5.png" alt="" class="inline"/></p>
<p><img src="https://github.com/SMG2S/SMG2S/tree/devel/docs/figure/verification_4.png" alt="" class="inline"/></p>
<p><img src="https://github.com/SMG2S/SMG2S/tree/devel/docs/figure/verification_1.png" alt="" class="inline"/></p>
<p><img src="https://github.com/SMG2S/SMG2S/tree/devel/docs/figure/verification_2.png" alt="" class="inline"/></p>
<p><img src="https://github.com/SMG2S/SMG2S/tree/devel/docs/figure/verification_3.png" alt="" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
